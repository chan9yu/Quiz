import{j as n,f as I,T as d,F as h,C as R,r as l,h as w,i as P,J as T,k as D,b as L,u as O,l as k,B as A,d as K,R as Q}from"./index-d5ba6aed.js";import{i as W,b}from"./index-1238fe9e.js";const q=e=>{const{answer:t,question:r,...a}=e;return n.jsxs(I,{role:"alert",...a,children:[n.jsx(d,{$size:"100",$weight:"bold",children:r}),n.jsxs(h,{$gap:4,$alignItems:"flex-end",children:[n.jsx(d,{$size:"75",$color:"success",$colorLevel:"500",$weight:"medium",children:"정답"}),n.jsx(d,{$size:"75",children:t})]})]})},v="label";function C(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function B(e,t){const r=e.options;r&&t&&Object.assign(r,t)}function y(e,t){e.labels=t}function z(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v;const a=[];e.datasets=t.map(s=>{const o=e.datasets.find(f=>f[r]===s[r]);return!o||!s.data||a.includes(o)?{...s}:(a.push(o),Object.assign(o,s),o)})}function J(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:v;const r={labels:[],datasets:[]};return y(r,e.labels),z(r,e.datasets,t),r}function M(e,t){const{height:r=150,width:a=300,redraw:s=!1,datasetIdKey:o,type:f,data:i,options:u,plugins:g=[],fallbackContent:$,updateMode:j,...E}=e,m=l.useRef(null),c=l.useRef(),p=()=>{m.current&&(c.current=new R(m.current,{type:f,data:J(i,o),options:u&&{...u},plugins:g}),C(t,c.current))},x=()=>{C(t,null),c.current&&(c.current.destroy(),c.current=null)};return l.useEffect(()=>{!s&&c.current&&u&&B(c.current,u)},[s,u]),l.useEffect(()=>{!s&&c.current&&y(c.current.config.data,i.labels)},[s,i.labels]),l.useEffect(()=>{!s&&c.current&&i.datasets&&z(c.current.config.data,i.datasets,o)},[s,i.datasets]),l.useEffect(()=>{c.current&&(s?(x(),setTimeout(p)):c.current.update(j))},[s,u,i.labels,i.datasets,j]),l.useEffect(()=>{c.current&&(x(),setTimeout(p))},[f]),l.useEffect(()=>(p(),()=>x()),[]),w.createElement("canvas",Object.assign({ref:m,role:"img",height:r,width:a},E),$)}const N=l.forwardRef(M);function F(e,t){return R.register(t),l.forwardRef((r,a)=>w.createElement(N,Object.assign({},r,{ref:a,type:e})))}const S=F("pie",P),H=e=>{const{correctCount:t,incorrectCount:r,...a}=e,{color:s}=T();return n.jsx(D,{role:"graphics-document",...a,children:n.jsx(S,{data:{labels:["정답","오답"],datasets:[{label:"퀴즈 결과",data:[t,r],backgroundColor:[s.success[400],s.error[400]],borderColor:[s.success[400],s.error[400]],borderWidth:1}]}})})},Y=()=>{const e=L(),t=O(),[r]=k(),a=W(r.get("res")),s=a.incorrectQuizData.length,o=a.quizCount-s,f=()=>{e(K()),t(Q.READY)},i=()=>{f()};return a?n.jsxs(h,{$direction:"column",$alignItems:"center",$height:"100%",$gap:20,children:[n.jsxs(h,{$direction:"column",$alignItems:"center",$gap:8,children:[n.jsx(d,{$size:"500",$weight:"bold",tag:"h2",children:"🥳 모든 퀴즈를 풀었습니다 🎉"}),n.jsxs(h,{$alignItems:"center",$gap:8,children:[n.jsxs(d,{id:"correct-count",$color:"success",$colorLevel:"500",$size:"50",children:["정답 ",o,"개"]}),n.jsxs(d,{id:"incorrect-count",$color:"error",$colorLevel:"500",$size:"50",children:["오답 ",s,"개"]}),n.jsxs(d,{id:"seconds",$colorLevel:"600",$size:"50",$weight:"medium",children:["  총 소요 시간 ",a.seconds,"초"]})]})]}),n.jsx(H,{id:"result-chart",correctCount:o,incorrectCount:s}),n.jsx(A,{$fullWidth:!0,onClick:i,children:"처음으로"}),n.jsx(d,{$colorLevel:"700",$size:"200",$weight:"medium",style:{marginRight:"auto"},children:"오답 노트 📝"}),n.jsx(h,{$direction:"column",$gap:8,style:{flex:1,overflow:"auto"},children:a==null?void 0:a.incorrectQuizData.map(({correct_answer:u,question:g},$)=>n.jsx(q,{id:"incorrect-note-box",answer:b(u)||"",question:b(g)||""},$))})]}):(f(),null)};export{Y as default};
