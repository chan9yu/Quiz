import{j as e,W as y,P as D,T as i,a as P,I as N,u as _,b as q,r as c,R as j,F as u,B as w,c as A}from"./index-7a865a6e.js";import{s as T,b as g}from"./index-65217616.js";import{u as k}from"./useDispatch-92b741ba.js";const B=l=>{const{answerStatus:o=null,children:s,isCorrect:d=!1,onClick:h,prefixNumber:x,selected:a=!1}=l;return e.jsxs(y,{$answerStatus:o,$isCorrect:d,$selected:a,onClick:h,children:[e.jsx(D,{children:x}),e.jsx(i,{$size:"200",$weight:"bold",children:s})]})},U=l=>{const{percent:o}=l;if(!(o>=0&&o<=100&&Number.isInteger(o)))throw new Error("0 ~ 100 ÏÇ¨Ïù¥Ïóê Ïà´ÏûêÎßå ÏûÖÎ†•Í∞ÄÎä•Ìï©ÎãàÎã§.");return e.jsx(P,{children:e.jsx(N,{$percent:o})})},G=()=>{const l=_(),o=k(),{quiz:s}=q(t=>t.quiz),d=c.useRef(),[h,x]=c.useState(0),[a,S]=c.useState(0),[$,p]=c.useState(null),[C,z]=c.useState(null),[I,b]=c.useState([]),m=s&&a+1===s.length,r=s&&s[a],f=c.useMemo(()=>r&&T([r.correct_answer,...r.incorrect_answers]),[r]),v=t=>()=>{z(t),f[t]===r.correct_answer?p("correct"):(p("incorrect"),b(n=>[...n,r]))},E=()=>{if(m){const n={incorrectQuizData:I.map(({correct_answer:W,question:Q})=>({correct_answer:W,question:Q})),quizCount:s.length,seconds:String(h)},R=encodeURIComponent(JSON.stringify(n));l({pathname:j.RESULT,search:`?res=${R}`})}else S(t=>t+1),p(null)},L=()=>{confirm("Ï†ïÎßêÎ°ú ÎÇòÍ∞ÄÏãúÍ≤†ÏäµÎãàÍπå?")&&o(A())};return c.useEffect(()=>(d.current=setInterval(()=>{x(t=>t+1)},1e3),()=>{clearInterval(d.current)}),[]),c.useEffect(()=>{const t=n=>{n.preventDefault(),n.returnValue=""};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[]),c.useEffect(()=>{s||l(j.READY)},[l,s]),s?e.jsxs(u,{$direction:"column",$height:"100%",$gap:20,children:[e.jsxs(u,{$fullWidth:!0,$justifyContent:"space-between",$alignItems:"end",children:[e.jsxs(i,{$size:"600",$weight:"bold",tag:"h2",children:["Question ",a+1]}),e.jsxs(i,{$colorLevel:"600",$size:"75",children:["‚è∞ ",h,"Ï¥à"]})]}),e.jsxs(u,{$alignItems:"center",$gap:12,$fullWidth:!0,children:[e.jsx(U,{percent:(a+1)/s.length*100}),e.jsx(i,{$color:"gray",$colorLevel:"500",$weight:"bold",children:`${a+1}/${s.length}`})]}),e.jsx(i,{$size:"400",$weight:"medium",style:{height:"100px"},children:g(r.question)}),e.jsxs(u,{$height:50,children:[$==="correct"&&e.jsx(i,{$color:"success",$colorLevel:"500",children:"Ï†ïÎãµÏûÖÎãàÎã§ üòÜ"}),$==="incorrect"&&e.jsxs(u,{$direction:"column",$gap:8,children:[e.jsx(i,{$color:"error",$colorLevel:"500",children:"Ïò§ÎãµÏûÖÎãàÎã§ üò•"}),e.jsxs(i,{children:["Ï†ïÎãµÏùÄ ",g(r.correct_answer)," ÏûÖÎãàÎã§"]})]})]}),e.jsx(u,{$direction:"column",$flexGrow:1,$fullWidth:!0,$gap:20,$justifyContent:"center",children:f==null?void 0:f.map((t,n)=>e.jsx(B,{answerStatus:$,prefixNumber:n+1,onClick:v(n),isCorrect:(r==null?void 0:r.correct_answer)===t,selected:C===n,children:g(t)},t))}),e.jsxs(u,{$direction:"column",$fullWidth:!0,$gap:12,children:[e.jsx(w,{$fullWidth:!0,disabled:!$,onClick:E,children:m?"Í≤∞Í≥º Î≥¥Í∏∞":"Îã§Ïùå Î¨∏Ìï≠"}),e.jsx(w,{$color:"gray",$fullWidth:!0,onClick:L,children:"ÎÇòÍ∞ÄÍ∏∞"})]})]}):null};export{G as default};
