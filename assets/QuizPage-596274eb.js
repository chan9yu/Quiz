import{j as e,u as E,a as v,r as a,R as p,b as z}from"./index-53666ac1.js";import{W as I,P,T as i,a as W,I as R,u as L,F as d,B as j}from"./ProgressBar.styled-4ea212d1.js";const _=r=>{const{answerStatus:t=null,children:s,isCorrect:o=!1,onClick:f,prefixNumber:l,selected:h=!1}=r;return e.jsxs(I,{$answerStatus:t,$isCorrect:o,$selected:h,onClick:f,children:[e.jsx(P,{children:l}),e.jsx(i,{$size:"200",$weight:"bold",children:s})]})},A=r=>{const{percent:t}=r;if(!(t>=0&&t<=100&&Number.isInteger(t)))throw new Error("0 ~ 100 ÏÇ¨Ïù¥Ïóê Ïà´ÏûêÎßå ÏûÖÎ†•Í∞ÄÎä•Ìï©ÎãàÎã§.");return e.jsx(W,{children:e.jsx(R,{$percent:t})})},N=r=>{for(let t=r.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1)),o=r[t];r[t]=r[s],r[s]=o}return r},x=r=>{try{return atob(r)}catch(t){return console.error("Error decoding Base64:",t),null}},k=()=>{const r=E(),t=L(),{quiz:s}=v(n=>n.quiz),[o,f]=a.useState(0),[l,h]=a.useState(null),[m,w]=a.useState(null),g=s&&o+1===s.length,c=s&&s[o],$=a.useMemo(()=>c&&N([c.correct_answer,...c.incorrect_answers]),[c]),S=n=>()=>{w(n),$[n]===c.correct_answer?h("correct"):h("incorrect")},C=()=>{g?r(p.RESULT):(f(n=>n+1),h(null))},b=()=>{confirm("Ï†ïÎßêÎ°ú ÎÇòÍ∞ÄÏãúÍ≤†ÏäµÎãàÍπå?")&&t(z())};return a.useEffect(()=>{const n=u=>{u.preventDefault(),u.returnValue=""};return window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}},[]),a.useEffect(()=>{s||r(p.READY)},[r,s]),s?e.jsxs(d,{$direction:"column",$height:"100%",$gap:20,children:[e.jsxs(i,{$size:"600",$weight:"bold",tag:"h2",children:["Question ",o+1]}),e.jsxs(d,{$alignItems:"center",$gap:12,$fullWidth:!0,children:[e.jsx(A,{percent:(o+1)/s.length*100}),e.jsx(i,{$color:"gray",$colorLevel:"500",$weight:"bold",children:`${o+1}/${s.length}`})]}),e.jsx(i,{$size:"400",$weight:"medium",children:x(c.question)}),e.jsxs(d,{$height:50,children:[l==="correct"&&e.jsx(i,{$color:"success",$colorLevel:"500",children:"Ï†ïÎãµÏûÖÎãàÎã§ üòÜ"}),l==="incorrect"&&e.jsxs(d,{$direction:"column",$gap:8,children:[e.jsx(i,{$color:"error",$colorLevel:"500",children:"Ïò§ÎãµÏûÖÎãàÎã§ üò•"}),e.jsxs(i,{children:["Ï†ïÎãµÏùÄ ",x(c.correct_answer)," ÏûÖÎãàÎã§"]})]})]}),e.jsx(d,{$direction:"column",$flexGrow:1,$fullWidth:!0,$gap:20,$justifyContent:"center",children:$==null?void 0:$.map((n,u)=>e.jsx(_,{answerStatus:l,prefixNumber:u+1,onClick:S(u),isCorrect:(c==null?void 0:c.correct_answer)===n,selected:m===u,children:x(n)},n))}),e.jsxs(d,{$direction:"column",$fullWidth:!0,$gap:12,children:[e.jsx(j,{$fullWidth:!0,disabled:!l,onClick:C,children:g?"Í≤∞Í≥º Î≥¥Í∏∞":"Îã§Ïùå Î¨∏Ìï≠"}),e.jsx(j,{$color:"gray",$fullWidth:!0,onClick:b,children:"ÎÇòÍ∞ÄÍ∏∞"})]})]}):null};export{k as default};
